# PM 一页纸作战手册（每日5分钟）

> **文档版本**：v1.0  
> **最后更新**：2025-12-30  
> **状态**：✅ 快速参考（每日必看）  
> **用途**：每天 code review / 评审前，快速自检

---

## 🚫 技术红线（踩一条 = 立即叫停）

### 红线 1：线程
- ❌ 新增 `std::thread / pthread`
- ❌ 新增 `while(1) + sleep`
- ❌ 新增 `condition_variable`

### 红线 2：资源
- ❌ 页面 `create / destroy`（应该用 `show() / hide()`）
- ❌ UI 层 `new / delete`
- ❌ Service 持有 LVGL 对象

### 红线 3：层级
- ❌ UI 直接调 `libcurl / sqlite / tplayer`
- ❌ Service 操作控件
- ❌ Controller 解析 JSON

### 红线 4：架构升级（PM专属）
- ❌ 未经批准引入：event queue、并发、缓存、预加载

---

## 📋 需求模板（复制即用）

```markdown
【MVP】用户动作 → 系统行为 → UI结果

1️⃣ 用户动作：点击 XXX
2️⃣ 系统行为：网络请求 → 显示 loading → 展示列表（不写实现细节）
3️⃣ 数据要求：10条，字段 id+name
4️⃣ UI结果：loading可见，列表可滚动
5️⃣ MVP边界：不支持缓存、重试、分页
6️⃣ 验收标准：Yes/No 清单
7️⃣ 技术约束：必须用 NetworkService、EventQueue
```

---

## 🔟 需求审查10问（按顺序问）

1. ✅ 必须现在做？（否 → 延后）
2. ✅ 能同步实现？（否 → 禁止并发）
3. ✅ 不引入新线程？（是 → 否决）
4. ✅ 跨模块走 Event？（是 → 必须）
5. ✅ 全局对象是 Singleton？（是 → 必须）
6. ✅ 内存可释放？（否 → 明确策略或拒绝）
7. ✅ 有 loading/error？（是 → 必须）
8. ✅ 失败可接受？（否 → 延后需求）
9. ✅ 2周后可改？（否 → 拒绝或简化）
10. ✅ 1个人能做？（否 → 砍掉或拆分）

**任何一题不符合 → 立即叫停**

---

## 💬 PM话术（直接说）

### 复杂度控制
> 我们现在不是在拼功能多少，是在拼能不能在两个人的情况下长期维护。所以任何增加复杂度的方案，都必须等到产品验证成立之后。

### 线程红线
> 我们已经有 NetworkWorker 和 EventDispatcher 线程了，不需要再新增线程。如果这个功能必须用线程，说明设计有问题，需要重新思考。

### MVP边界
> 这个功能不在 MVP 范围内。我们先保证 MVP 能跑起来，后续版本再考虑这个功能。

### 架构升级
> 这个架构升级需要产品需求支撑。如果用户没有这个需求，我们不应该提前做架构升级。

### 失败可接受
> 网络失败在 MVP 阶段是可接受的。用户看到错误提示就可以了，不需要自动重试。如果这个失败不可接受，说明这个功能不应该在 MVP 阶段做。

---

## ✅ 每日自检（5分钟）

- [ ] 搜索 `std::thread`，是否有新增线程？
- [ ] 搜索 `new`/`delete`/`lv_obj_create`，是否有动态创建/销毁？
- [ ] 检查 UI 代码是否有 `curl_`/`sqlite3_`/`TPlayer` 调用？
- [ ] 检查 `CMakeLists.txt` 是否有新增依赖？
- [ ] 今天的需求是否符合"完整闭环、足够蠢"？

---

## 🧠 核心原则

> **这个改动，有没有让工程师多背一个"长期心智负担"？**  
> 如果有，叫停。

> **这个需求，是不是一个"完整闭环"，但又"足够蠢"？**  
> 是，就对了。

---

## 📚 完整文档

- [Tina KTV MVP 产品与技术协作规范 v1.0](./Tina_KTV_MVP产品与技术协作规范v1.0.md) ⭐⭐⭐ **必读**

---

**最后更新**: 2025-12-30  
**状态**: ✅ 快速参考（每日必看）


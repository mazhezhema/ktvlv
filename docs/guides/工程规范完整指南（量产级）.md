# å·¥ç¨‹è§„èŒƒå®Œæ•´æŒ‡å—ï¼ˆé‡äº§çº§ï¼‰

> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
> **æœ€åæ›´æ–°**ï¼š2025-12-30  
> **çŠ¶æ€**ï¼šâœ… æ ¸å¿ƒæ–‡æ¡£ï¼ˆå·¥ç¨‹è§„èŒƒ - é‡äº§çº§å®Œæ•´æŒ‡å—ï¼‰  
> **é€‚ç”¨å¹³å°**ï¼šF133 / Tina Linux  
> **ç›®æ ‡**ï¼šå®šä¹‰é‡äº§çº§å·¥ç¨‹è§„èŒƒå®Œæ•´æŒ‡å—ï¼ŒåŒ…å«ç¡¬è§„åˆ™ã€åº“ä½¿ç”¨è§„èŒƒã€ç™½åå•ç­‰ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é•¿æœŸè¿è¡Œä¸é‡äº§ç¯å¢ƒä¸‹çš„ç¨³å®šæ€§ä¸å¯ç»´æŠ¤æ€§

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™ï¼ˆä¸€å¥è¯ï¼‰

> **è¿™äº›ä¸æ˜¯æŠ€æœ¯éš¾ç‚¹ï¼Œæ˜¯é˜²æ­¢å›¢é˜Ÿå˜å¤§åå¤±æ§çš„ç¡¬è§„åˆ™ã€‚æœ¬é¡¹ç›®åº”ç”¨å±‚ä¾èµ–åº“æ•°é‡æœ‰é™ï¼Œå‡é‡‡ç”¨æˆç†Ÿã€å¯æ§çš„ç³»ç»Ÿçº§ä¸å¼€æºåº“ã€‚æ¯ä¸ªåº“å‡æœ‰æ˜ç¡®çš„ä½¿ç”¨è¾¹ç•Œã€æœ€ä½³å®è·µä¸ç¦æ­¢é¡¹ï¼Œç¦æ­¢è·¨å±‚è°ƒç”¨ã€ç¦æ­¢è·¨çº¿ç¨‹è¯¯ç”¨ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é•¿æœŸè¿è¡Œä¸é‡äº§ç¯å¢ƒä¸‹çš„ç¨³å®šæ€§ä¸å¯ç»´æŠ¤æ€§ã€‚**

---

## ğŸ“‹ ç›®å½•

### ç¬¬ä¸€éƒ¨åˆ†ï¼šå·¥ç¨‹è§„èŒƒç¡¬è§„åˆ™

1. [æ—¥å¿—åˆ†çº§è§„èŒƒ](#ä¸€-æ—¥å¿—åˆ†çº§è§„èŒƒ)
2. [è·¨çº¿ç¨‹UIæ›´æ–°è§„åˆ™](#äºŒ-è·¨çº¿ç¨‹uiæ›´æ–°è§„åˆ™)
3. [é…ç½®æ–‡ä»¶å¯å˜æ€§è¾¹ç•Œ](#ä¸‰-é…ç½®æ–‡ä»¶å¯å˜æ€§è¾¹ç•Œ)
4. [æ—¶é—´æºç»Ÿä¸€çº¦å®š](#å››-æ—¶é—´æºç»Ÿä¸€çº¦å®š)
5. [å¤–éƒ¨SDKéš”ç¦»å±‚å£°æ˜](#äº”-å¤–éƒ¨sdkéš”ç¦»å±‚å£°æ˜)
6. [æ˜ç¡®ç¦æ­¢é¡¹ï¼ˆé¿å‘æŒ‡å—ï¼‰](#å…­-æ˜ç¡®ç¦æ­¢é¡¹é¿å‘æŒ‡å—)

### ç¬¬äºŒéƒ¨åˆ†ï¼šåº”ç”¨å±‚åº“ä½¿ç”¨è§„èŒƒ

7. [åº“æ€»ä½“ç›˜ç‚¹](#ä¸ƒ-åº“æ€»ä½“ç›˜ç‚¹)
8. [é€åº“æ¸…å• + æœ€ä½³å®è·µ + é¿å‘æŒ‡å—](#å…«-é€åº“æ¸…å•--æœ€ä½³å®è·µ--é¿å‘æŒ‡å—)
9. [åº“ â†’ çº¿ç¨‹ â†’ æ¨¡å—æ˜ å°„è¡¨](#ä¹-åº“--çº¿ç¨‹--æ¨¡å—æ˜ å°„è¡¨)
10. [æ–°äºº Onboardingï¼šè¿™äº›åº“åƒä¸‡åˆ«ä¹±ç”¨](#å-æ–°äºº-onboardingè¿™äº›åº“åƒä¸‡åˆ«ä¹±ç”¨)

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šçº¿ç¨‹ä¸Singletonç™½åå•

11. [çº¿ç¨‹ç™½åå•](#åä¸€-çº¿ç¨‹ç™½åå•)
12. [Singleton ç™½åå•](#åäºŒ-singleton-ç™½åå•)
13. [ç”Ÿå‘½å‘¨æœŸç®¡ç†](#åä¸‰-ç”Ÿå‘½å‘¨æœŸç®¡ç†)

---

## ä¸€ã€æ—¥å¿—åˆ†çº§è§„èŒƒ

### 4 çº§æ—¥å¿—åˆ†çº§

| çº§åˆ« | ç”¨é€” | ä¸ŠæŠ¥ç­–ç•¥ | æ‰“å°é¢‘ç‡é™åˆ¶ |
|------|------|---------|------------|
| **ERROR** | ç³»ç»Ÿé”™è¯¯ã€å¼‚å¸¸ | å¿…é¡»ä¸ŠæŠ¥ | ç¦æ­¢åœ¨é«˜é¢‘å¾ªç¯ä¸­æ‰“å° |
| **WARN** | è­¦å‘Šã€å¯èƒ½å½±å“ä½“éªŒ | å»ºè®®ä¸ŠæŠ¥ | ç¦æ­¢åœ¨é«˜é¢‘å¾ªç¯ä¸­æ‰“å° |
| **INFO** | ä¸šåŠ¡å…³é”®è·¯å¾„ | ä¸ä¸ŠæŠ¥ | å…è®¸åœ¨å…³é”®è·¯å¾„æ‰“å° |
| **DEBUG** | è°ƒè¯•ä¿¡æ¯ | ä¸ä¸ŠæŠ¥ | é»˜è®¤å…³é—­ï¼Œå¼€å‘æ—¶å¯ç”¨ |

### ç¡¬è§„åˆ™

> **ERROR / WARN æ—¥å¿—ç¦æ­¢åœ¨é«˜é¢‘å¾ªç¯ä¸­æ‰“å°**

**åŸå› **ï¼š
- é«˜é¢‘å¾ªç¯ä¸­æ‰“å°æ—¥å¿—ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜
- æ—¥å¿—æ–‡ä»¶å¿«é€Ÿå¢é•¿ï¼Œå ç”¨ç£ç›˜ç©ºé—´
- æ—¥å¿—ç³»ç»Ÿæˆä¸ºæ€§èƒ½ç“¶é¢ˆ

**æ­£ç¡®åšæ³•**ï¼š
```cpp
// âŒ é”™è¯¯ï¼šåœ¨é«˜é¢‘å¾ªç¯ä¸­æ‰“å° ERROR
void playerLoop() {
    while (running_) {
        if (checkError()) {
            syslog(LOG_ERR, "[ktv][player] Error detected");  // é”™è¯¯ï¼
        }
        processFrame();
    }
}

// âœ… æ­£ç¡®ï¼šé”™è¯¯è®¡æ•°ï¼Œå®šæœŸä¸ŠæŠ¥
void playerLoop() {
    int error_count = 0;
    while (running_) {
        if (checkError()) {
            error_count++;
            // ä¸ç«‹å³æ‰“å°ï¼Œè€Œæ˜¯è®¡æ•°
        }
        processFrame();
        
        // æ¯ 1000 æ¬¡å¾ªç¯æ£€æŸ¥ä¸€æ¬¡
        if (loop_count % 1000 == 0 && error_count > 0) {
            syslog(LOG_ERR, "[ktv][player] Error count: %d", error_count);
            error_count = 0;
        }
    }
}
```

---

## äºŒã€è·¨çº¿ç¨‹UIæ›´æ–°è§„åˆ™

### ç¡¬è§„åˆ™

> **UI åªèƒ½åœ¨ UI çº¿ç¨‹æ›´æ–°ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½é€šè¿‡ Event / Message é€šçŸ¥ã€‚**

**åŸå› **ï¼š
- LVGL ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„
- è·¨çº¿ç¨‹ç›´æ¥æ›´æ–° UI ä¼šå¯¼è‡´å´©æºƒæˆ–æ•°æ®ç«äº‰
- å¿…é¡»é€šè¿‡äº‹ä»¶æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨

**æ­£ç¡®åšæ³•**ï¼š
```cpp
// âŒ é”™è¯¯ï¼šè·¨çº¿ç¨‹ç›´æ¥æ›´æ–° UI
void NetworkWorker::onResponseReceived(const Response& resp) {
    // é”™è¯¯ï¼åœ¨é UI çº¿ç¨‹ç›´æ¥æ›´æ–° UI
    lv_label_set_text(ui_label, resp.text.c_str());
}

// âœ… æ­£ç¡®ï¼šé€šè¿‡ Event é€šçŸ¥ UI çº¿ç¨‹
void NetworkWorker::onResponseReceived(const Response& resp) {
    // å‘é€äº‹ä»¶åˆ° UI çº¿ç¨‹
    EventBus::getInstance().publish(Event{
        EventType::UPDATE_LABEL,
        resp.text
    });
}

// UI çº¿ç¨‹æ¶ˆè´¹äº‹ä»¶
void UISystem::onEvent(const Event& ev) {
    if (ev.type == EventType::UPDATE_LABEL) {
        // æ­£ç¡®ï¼åœ¨ UI çº¿ç¨‹æ›´æ–° UI
        lv_label_set_text(ui_label, ev.data.c_str());
    }
}
```

---

## ä¸‰ã€é…ç½®æ–‡ä»¶å¯å˜æ€§è¾¹ç•Œ

### ä¸‰ç±»é…ç½®

| é…ç½®ç±»å‹ | è¯»å–æ—¶æœº | å¯å˜æ€§ | å‡çº§è¦†ç›– | ç¤ºä¾‹ |
|---------|---------|--------|---------|------|
| **å¼€æœºè¯»ä¸€æ¬¡** | åº”ç”¨å¯åŠ¨æ—¶ | ä¸å¯å˜ | ä¸è¦†ç›– | è®¾å¤‡åºåˆ—å·ã€MACåœ°å€ |
| **è¿è¡ŒæœŸå¯å˜** | åº”ç”¨è¿è¡Œæ—¶ | å¯å˜ | ä¸è¦†ç›– | éŸ³é‡è®¾ç½®ã€æ’­æ”¾æ¨¡å¼ |
| **å‡çº§è¦†ç›–** | åº”ç”¨å¯åŠ¨æ—¶ | å¯å˜ | è¦†ç›– | æœåŠ¡å™¨åœ°å€ã€åŠŸèƒ½å¼€å…³ |

### ç¡¬è§„åˆ™

> **å¿…é¡»æ˜ç¡®æ¯ç±»é…ç½®çš„è¯»å–æ—¶æœºã€å¯å˜æ€§å’Œå‡çº§è¦†ç›–ç­–ç•¥**

**å®ç°ç¤ºä¾‹**ï¼š
```cpp
class Config {
public:
    // å¼€æœºè¯»ä¸€æ¬¡ï¼ˆä¸å¯å˜ï¼‰
    struct BootConfig {
        std::string device_serial;
        std::string mac_address;
    } boot_config;

    // è¿è¡ŒæœŸå¯å˜ï¼ˆä¸è¦†ç›–ï¼‰
    struct RuntimeConfig {
        int volume;
        bool play_mode;
    } runtime_config;

    // å‡çº§è¦†ç›–ï¼ˆå¯å˜ï¼‰
    struct UpgradeConfig {
        std::string server_url;
        bool feature_enabled;
    } upgrade_config;

    void load() {
        // åŠ è½½å¼€æœºé…ç½®ï¼ˆåªè¯»ä¸€æ¬¡ï¼‰
        loadBootConfig();

        // åŠ è½½è¿è¡ŒæœŸé…ç½®ï¼ˆå¯ä¿®æ”¹ï¼‰
        loadRuntimeConfig();

        // åŠ è½½å‡çº§é…ç½®ï¼ˆå‡çº§æ—¶è¦†ç›–ï¼‰
        loadUpgradeConfig();
    }

    void saveRuntimeConfig() {
        // åªä¿å­˜è¿è¡ŒæœŸé…ç½®
        saveToFile("runtime.conf", runtime_config);
    }
};
```

---

## å››ã€æ—¶é—´æºç»Ÿä¸€çº¦å®š

### ç¡¬è§„åˆ™

> **æ‰€æœ‰ä¸šåŠ¡æ—¶é—´ç»Ÿä¸€ä½¿ç”¨ monotonic clockï¼Œç¦æ­¢ç›´æ¥ä½¿ç”¨ wall clock å‚ä¸ä¸šåŠ¡åˆ¤æ–­ã€‚**

**åŸå› **ï¼š
- Wall clock å¯èƒ½è¢«ç³»ç»Ÿæ—¶é—´è°ƒæ•´å½±å“ï¼ˆNTP åŒæ­¥ã€æ‰‹åŠ¨è°ƒæ•´ï¼‰
- Monotonic clock ä¸å—ç³»ç»Ÿæ—¶é—´è°ƒæ•´å½±å“ï¼Œé€‚åˆä¸šåŠ¡åˆ¤æ–­
- KTV åœºæ™¯ä¸­ï¼Œæ’­æ”¾è¿›åº¦ã€è¶…æ—¶åˆ¤æ–­ç­‰å¿…é¡»ä½¿ç”¨ monotonic clock

**æ­£ç¡®åšæ³•**ï¼š
```cpp
#include <time.h>
#include <sys/time.h>

// âŒ é”™è¯¯ï¼šä½¿ç”¨ wall clock
void checkTimeout() {
    time_t now = time(nullptr);  // é”™è¯¯ï¼wall clock
    if (now - start_time > TIMEOUT) {
        // å¦‚æœç³»ç»Ÿæ—¶é—´è¢«è°ƒæ•´ï¼Œè¿™é‡Œä¼šå‡ºé”™
    }
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ monotonic clock
void checkTimeout() {
    struct timespec ts;
    clock_gettime(CLOCK_MONOTONIC, &ts);  // æ­£ç¡®ï¼monotonic clock
    int64_t now_ms = ts.tv_sec * 1000 + ts.tv_nsec / 1000000;
    if (now_ms - start_time_ms > TIMEOUT_MS) {
        // ä¸å—ç³»ç»Ÿæ—¶é—´è°ƒæ•´å½±å“
    }
}
```

---

## äº”ã€å¤–éƒ¨SDKéš”ç¦»å±‚å£°æ˜

### ç¡¬è§„åˆ™

> **ä¸‰æ–¹åº“å¿…é¡»é€šè¿‡ Adapter å±‚è®¿é—®ï¼Œç¦æ­¢ä¸šåŠ¡å±‚ç›´æ¥è°ƒç”¨ç¬¬ä¸‰æ–¹ APIã€‚**

**åŸå› **ï¼š
- é˜²æ­¢åæœŸæŠ€æœ¯å€ºçˆ†ç‚¸
- ä¾¿äºæ›¿æ¢ç¬¬ä¸‰æ–¹åº“
- ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

**å½“å‰ç¬¬ä¸‰æ–¹åº“**ï¼š
- TPlayerï¼ˆå…¨å¿—å®˜æ–¹æ’­æ”¾å™¨ SDKï¼‰
- libcurlï¼ˆHTTP å®¢æˆ·ç«¯ï¼‰
- cJSONï¼ˆJSON è§£æï¼‰

**æ­£ç¡®åšæ³•**ï¼š
```cpp
// âŒ é”™è¯¯ï¼šä¸šåŠ¡å±‚ç›´æ¥è°ƒç”¨ç¬¬ä¸‰æ–¹ API
void PlayController::play(const std::string& url) {
    tplayer_play(url.c_str());  // é”™è¯¯ï¼ç›´æ¥è°ƒç”¨ TPlayer API
}

// âœ… æ­£ç¡®ï¼šé€šè¿‡ Adapter å±‚è®¿é—®
void PlayController::play(const std::string& url) {
    PlayerAdapter::instance().play(url);  // æ­£ç¡®ï¼é€šè¿‡ Adapter
}

// Adapter å±‚å°è£…ç¬¬ä¸‰æ–¹ API
class PlayerAdapter {
public:
    void play(const std::string& url) {
        syslog(LOG_INFO, "[ktv][player] Playing: %s", url.c_str());
        int ret = tplayer_play(url.c_str());  // åœ¨ Adapter å±‚è°ƒç”¨
        if (ret != 0) {
            syslog(LOG_ERR, "[ktv][player] Play failed: %d", ret);
            // ç»Ÿä¸€é”™è¯¯å¤„ç†
        }
    }
};
```

---

## å…­ã€æ˜ç¡®ç¦æ­¢é¡¹ï¼ˆé¿å‘æŒ‡å—ï¼‰

### ğŸš« ç¦æ­¢åœ¨å›è°ƒä¸­åšé˜»å¡æ“ä½œ

```cpp
// âŒ é”™è¯¯ï¼šåœ¨å›è°ƒä¸­åšé˜»å¡æ“ä½œ
void onButtonClick() {
    HttpService::instance().get(url);  // é”™è¯¯ï¼é˜»å¡æ“ä½œ
}

// âœ… æ­£ç¡®ï¼šå¼‚æ­¥å¤„ç†
void onButtonClick() {
    NetworkWorker::instance().post([url]() {
        HttpService::instance().get(url);
    });
}
```

### ğŸš« ç¦æ­¢åœ¨ UI çº¿ç¨‹è®¿é—®ç½‘ç»œ / IO

```cpp
// âŒ é”™è¯¯ï¼šåœ¨ UI çº¿ç¨‹è®¿é—®ç½‘ç»œ
void onButtonClick() {
    auto response = HttpService::instance().get(url);  // é”™è¯¯ï¼
}

// âœ… æ­£ç¡®ï¼šæŠ•é€’åˆ°å·¥ä½œçº¿ç¨‹
void onButtonClick() {
    NetworkWorker::instance().post([url]() {
        auto response = HttpService::instance().get(url);
        // é€šè¿‡ Event å›ä¼ ç»“æœ
    });
}
```

### ğŸš« ç¦æ­¢åœ¨ææ„å‡½æ•°ä¸­é˜»å¡ç­‰å¾…å¤–éƒ¨èµ„æº

```cpp
// âŒ é”™è¯¯ï¼šåœ¨ææ„å‡½æ•°ä¸­é˜»å¡ç­‰å¾…
~NetworkWorker() {
    curl_easy_cleanup(handle_);  // å¦‚æœ handle_ æ­£åœ¨ä½¿ç”¨ï¼Œå¯èƒ½é˜»å¡
}

// âœ… æ­£ç¡®ï¼šåœ¨ stop() ä¸­æ¸…ç†
void stop() {
    running_.store(false);
    // ç­‰å¾…å½“å‰è¯·æ±‚å®Œæˆ
    waitForCurrentRequest();
    curl_easy_cleanup(handle_);
}
```

### ğŸš« ç¦æ­¢æ¨¡å—é—´ç›¸äº’æŒæœ‰è£¸æŒ‡é’ˆ

```cpp
// âŒ é”™è¯¯ï¼šæ¨¡å—é—´ç›¸äº’æŒæœ‰è£¸æŒ‡é’ˆ
class NetworkWorker {
    PlayerAdapter* player_;  // é”™è¯¯ï¼è£¸æŒ‡é’ˆ
};

// âœ… æ­£ç¡®ï¼šé€šè¿‡ Singleton è®¿é—®
class NetworkWorker {
    void notifyPlayer() {
        PlayerAdapter::instance().onNetworkEvent();  // æ­£ç¡®ï¼é€šè¿‡ Singleton
    }
};
```

### ğŸš« ç¦æ­¢éšå¼å¯åŠ¨åå°çº¿ç¨‹

```cpp
// âŒ é”™è¯¯ï¼šéšå¼å¯åŠ¨åå°çº¿ç¨‹
void HttpService::get(const std::string& url) {
    std::thread([url]() {
        // é”™è¯¯ï¼éšå¼åˆ›å»ºçº¿ç¨‹
        performHttpRequest(url);
    }).detach();
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨å·²æœ‰çš„å·¥ä½œçº¿ç¨‹
void HttpService::get(const std::string& url) {
    NetworkWorker::instance().post([url]() {
        // æ­£ç¡®ï¼ä½¿ç”¨å·²æœ‰çš„å·¥ä½œçº¿ç¨‹
        performHttpRequest(url);
    });
}
```

### ğŸš« ç¦æ­¢ç”¨ sleep ä½œä¸ºåŒæ­¥æ‰‹æ®µ

```cpp
// âŒ é”™è¯¯ï¼šç”¨ sleep ä½œä¸ºåŒæ­¥æ‰‹æ®µ
void waitForResponse() {
    while (!response_received_) {
        std::this_thread::sleep_for(std::chrono::milliseconds(100));  // é”™è¯¯ï¼
    }
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ condition_variable
void waitForResponse() {
    std::unique_lock<std::mutex> lock(mtx_);
    cv_.wait(lock, [this]() {
        return response_received_;
    });
}
```

---

## ä¸ƒã€åº“æ€»ä½“ç›˜ç‚¹

### åº”ç”¨å±‚å®é™…æ¶‰åŠçš„åº“

**åº”ç”¨å±‚å®é™…æ¶‰åŠçš„åº“ â‰ˆ 12 ä¸ªå·¦å³**ï¼Œæ•°é‡éå¸¸å…‹åˆ¶ï¼Œè¿™æ˜¯å¥½äº‹ã€‚

å¯ä»¥æ¸…æ™°åˆ†ä¸º **7 å¤§ç±»**ï¼š

| ç±»åˆ« | åº“å | æ•°é‡ | è¯´æ˜ |
|------|------|------|------|
| **C++ æ ‡å‡†åº“** | libstdc++ | 1 | å®¹å™¨ã€RAIIã€çº¿ç¨‹æŠ½è±¡ |
| **çº¿ç¨‹ / åŒæ­¥** | std::thread / pthread | 1 | çº¿ç¨‹æŠ½è±¡ï¼ˆåº”ç”¨å±‚åªæ¥è§¦ std::threadï¼‰ |
| **UI / äº¤äº’** | LVGL | 1 | UI æ¸²æŸ“ã€äº‹ä»¶å›è°ƒ |
| **ç½‘ç»œ** | libcurlã€libwebsockets | 2 | HTTPã€WebSocket |
| **å¤šåª’ä½“** | TPlayerã€ALSA | 2 | éŸ³è§†é¢‘æ’­æ”¾ã€éŸ³é¢‘è¾“å‡º |
| **æ•°æ®ä¸é…ç½®** | SQLite3ã€cJSON | 2 | æœ¬åœ°æ•°æ®ã€JSON è§£æ |
| **ç³»ç»Ÿå·¥å…·ç±»åº“** | syslogã€POSIXã€chrono | 3 | æ—¥å¿—ã€æ–‡ä»¶ç³»ç»Ÿã€æ—¶é—´ |
| **åˆè®¡** | | **12** | **æ•°é‡å…‹åˆ¶ï¼Œæˆç†Ÿå¯æ§** |

---

## å…«ã€é€åº“æ¸…å• + æœ€ä½³å®è·µ + é¿å‘æŒ‡å—

### 1ï¸âƒ£ C++ æ ‡å‡†åº“ï¼ˆlibstdc++ï¼‰

#### æ¶‰åŠç»„ä»¶

- `<string> <vector> <map> <queue>`
- `<thread> <mutex> <condition_variable>`
- `<atomic>`
- `<chrono>`

#### ç”¨é€”

- å®¹å™¨ï¼ˆstringã€vectorã€mapã€queueï¼‰
- RAII èµ„æºç®¡ç†
- çº¿ç¨‹æŠ½è±¡ï¼ˆstd::threadï¼‰
- åŒæ­¥åŸè¯­ï¼ˆmutexã€condition_variableï¼‰

#### æœ€ä½³å®è·µ

1. **åªä½¿ç”¨ C++11 å­é›†**
   - ä¸ä½¿ç”¨ C++14/17/20 ç‰¹æ€§
   - ä¿æŒä¸ F133 å·¥å…·é“¾å…¼å®¹

2. **æ˜ç¡® STL ä»…ç”¨äº**ï¼š
   - å®¹å™¨ï¼ˆæ•°æ®å­˜å‚¨ï¼‰
   - RAIIï¼ˆèµ„æºç®¡ç†ï¼‰
   - çº¿ç¨‹æŠ½è±¡ï¼ˆstd::threadï¼‰

3. **ä½¿ç”¨ `std::unique_lock` + `condition_variable`**
   ```cpp
   std::unique_lock<std::mutex> lock(mtx_);
   cv_.wait(lock, [this]() {
       return !queue_.empty() || !running_.load();
   });
   ```

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢ä½¿ç”¨å¼‚å¸¸åšä¸šåŠ¡æµç¨‹**
- ğŸš« **ç¦æ­¢ `std::async`**
- ğŸš« **ç¦æ­¢è¿‡åº¦æ¨¡æ¿ / meta ç¼–ç¨‹**
- ğŸš« **ä¸ä¾èµ– STL çš„ allocator è¡Œä¸º**

---

### 2ï¸âƒ£ çº¿ç¨‹åº“ï¼ˆstd::thread / pthreadï¼‰

#### æ¶‰åŠç»„ä»¶

- `std::thread`
- `std::mutex`
- `std::condition_variable`
- åº•å±‚ `pthread`ï¼ˆåº”ç”¨å±‚ä¸ç›´æ¥æ¥è§¦ï¼‰

#### ç”¨é€”

- çº¿ç¨‹åˆ›å»ºå’Œç®¡ç†
- çº¿ç¨‹åŒæ­¥ï¼ˆmutexã€condition_variableï¼‰
- çº¿ç¨‹é—´é€šä¿¡

#### æœ€ä½³å®è·µ

1. **åº”ç”¨å±‚åªæ¥è§¦ std::thread å°è£…**
2. **çº¿ç¨‹å¸¸é©»ï¼Œä»»åŠ¡é©±åŠ¨**
3. **Singleton çº¿ç¨‹å®¿ä¸»**
4. **æ˜¾å¼ `start / stop / join`**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢ `detach`**
- ğŸš« **ç¦æ­¢ä¸šåŠ¡å±‚ç›´æ¥ pthread**
- ğŸš« **ç¦æ­¢çº¿ç¨‹æ„é€ å³å¯åŠ¨**
- ğŸš« **ç¦æ­¢ busy-loop + sleep**

---

### 3ï¸âƒ£ LVGLï¼ˆUI æ ¸å¿ƒåº“ï¼‰

#### ç”¨é€”

- UI æ¸²æŸ“
- äº‹ä»¶å›è°ƒ
- ç»„ä»¶ç®¡ç†

#### æœ€ä½³å®è·µï¼ˆå¿…é¡»å†™è¿›æ–‡æ¡£ï¼‰

1. **LVGL åªå…è®¸åœ¨ UI çº¿ç¨‹è°ƒç”¨**
2. **UI æ›´æ–°é€šè¿‡ Event / Message**
3. **Presenter ä¸ç›´æ¥æ“ä½œ lv_obj**
4. **LVGL å›è°ƒåªåšè½»é€»è¾‘**
5. **å®šæ—¶è°ƒç”¨ `lv_timer_handler`**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢è·¨çº¿ç¨‹è®¿é—® lv_obj**
- ğŸš« **ç¦æ­¢åœ¨ UI å›è°ƒä¸­åš IO / ç½‘ç»œ**
- ğŸš« **ç¦æ­¢åŠ¨æ€é¢‘ç¹åˆ›å»º/é”€æ¯ obj**
- ğŸš« **ç¦æ­¢åœ¨ UI çº¿ç¨‹ sleep**

---

### 4ï¸âƒ£ libcurlï¼ˆHTTP / ç½‘ç»œï¼‰

#### ç”¨é€”

- REST API
- ä¸‹è½½
- å¿ƒè·³

#### æœ€ä½³å®è·µ

1. **`curl_global_init` åªè°ƒç”¨ä¸€æ¬¡**
2. **æ‰€æœ‰è¯·æ±‚åªåœ¨ Network Thread**
3. **æ¯ä¸ªè¯·æ±‚ç‹¬ç«‹ CURL handle**
4. **æ˜¾å¼è®¾ç½® timeoutã€retryã€fail-fast**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢è·¨çº¿ç¨‹å¤ç”¨ CURL***
- ğŸš« **ç¦æ­¢ UI çº¿ç¨‹ç›´æ¥å‘è¯·æ±‚**
- ğŸš« **ç¦æ­¢æ—  timeout**
- ğŸš« **ç¦æ­¢é˜»å¡ä¸»çº¿ç¨‹**

---

### 5ï¸âƒ£ WebSocketï¼ˆlibwebsocketsï¼‰

#### ç”¨é€”

- å®æ—¶çŠ¶æ€
- ç‚¹æ­Œæ§åˆ¶
- æœåŠ¡ç«¯æ¨é€

#### æœ€ä½³å®è·µ

1. **WebSocket è¿è¡Œåœ¨ Network Thread**
2. **ä¸ UI è§£è€¦ï¼Œé€šè¿‡ Event é€šçŸ¥**
3. **è‡ªåŠ¨é‡è¿æœ‰é€€é¿ç­–ç•¥**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢ UI çº¿ç¨‹ç»´æŠ¤è¿æ¥**
- ğŸš« **ç¦æ­¢æ— é™é‡è¿**
- ğŸš« **ç¦æ­¢åœ¨å›è°ƒä¸­åšé‡é€»è¾‘**

---

### 6ï¸âƒ£ TPlayerï¼ˆå¤šåª’ä½“æ’­æ”¾ï¼‰

#### ç”¨é€”

- éŸ³è§†é¢‘æ’­æ”¾
- KTV æ ¸å¿ƒèƒ½åŠ›

#### æœ€ä½³å®è·µ

1. **Singleton Player Service**
2. **ç‹¬ç«‹ Player Thread**
3. **ä¸¥æ ¼çŠ¶æ€æœºï¼ˆIdle / Preparing / Playing / Errorï¼‰**
4. **æ‰€æœ‰è°ƒç”¨ä¸²è¡ŒåŒ–**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢å¤šå®ä¾‹ tplayer**
- ğŸš« **ç¦æ­¢å¹¶å‘è°ƒç”¨æ§åˆ¶æ¥å£**
- ğŸš« **ç¦æ­¢ UI çº¿ç¨‹ç›´æ¥è°ƒç”¨ tplayer**
- ğŸš« **ç¦æ­¢å¿½ç•¥ error å›è°ƒ**

---

### 7ï¸âƒ£ ALSA / éŸ³é¢‘æ¥å£

#### ç”¨é€”

- éŸ³é¢‘è¾“å‡º
- éŸ³é‡æ§åˆ¶

#### æœ€ä½³å®è·µ

1. **ç»Ÿä¸€ Audio Manager å°è£…**
2. **éŸ³é‡ / mute çŠ¶æ€é›†ä¸­ç®¡ç†**
3. **ä¸ Player è§£è€¦**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢å¤šçº¿ç¨‹åŒæ—¶æ“ä½œéŸ³é¢‘è®¾å¤‡**
- ğŸš« **ç¦æ­¢é¢‘ç¹ open / close**
- ğŸš« **ç¦æ­¢ç¡¬ç¼–ç éŸ³é¢‘å‚æ•°**

---

### 8ï¸âƒ£ SQLite3ï¼ˆæœ¬åœ°æ•°æ®ï¼‰

#### ç”¨é€”

- ç‚¹æ­Œè®°å½•
- ç¼“å­˜
- é…ç½®æŒä¹…åŒ–

#### æœ€ä½³å®è·µ

1. **å•çº¿ç¨‹è®¿é—®ï¼ˆæˆ–ä¸“ç”¨ DB Threadï¼‰**
2. **WAL æ¨¡å¼**
3. **æ‰€æœ‰ SQL é¢„ç¼–è¯‘**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢å¤šçº¿ç¨‹ç›´æ¥è®¿é—®åŒä¸€ DB**
- ğŸš« **ç¦æ­¢ UI çº¿ç¨‹æ“ä½œæ•°æ®åº“**
- ğŸš« **ç¦æ­¢é•¿äº‹åŠ¡**
- ğŸš« **ç¦æ­¢åŠ¨æ€æ‹¼ SQL**

---

### 9ï¸âƒ£ cJSONï¼ˆJSON è§£æï¼‰

#### ç”¨é€”

- åè®®è§£æ
- é…ç½®æ–‡ä»¶

#### æœ€ä½³å®è·µ

1. **JSON åªåšæ•°æ®è½½ä½“**
2. **è§£æä¸ä¸šåŠ¡è§£è€¦**
3. **æ ¡éªŒå­—æ®µå®Œæ•´æ€§**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢ UI çº¿ç¨‹åš JSON è§£æ**
- ğŸš« **ç¦æ­¢ä¿¡ä»»å¤–éƒ¨ JSON**
- ğŸš« **ç¦æ­¢åœ¨çƒ­è·¯å¾„åå¤ parse**

---

### ğŸ”Ÿ æ–‡ä»¶ç³»ç»Ÿ APIï¼ˆPOSIXï¼‰

#### ç”¨é€”

- é…ç½®
- æ—¥å¿—
- ç¼“å­˜

#### æœ€ä½³å®è·µ

1. **æ‰€æœ‰è·¯å¾„é›†ä¸­ç®¡ç†**
2. **IO æ“ä½œæ”¾åœ¨ Worker Thread**
3. **å†™æ“ä½œå¯é™çº§**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢ UI çº¿ç¨‹åšæ–‡ä»¶ IO**
- ğŸš« **ç¦æ­¢å‡è®¾ç£ç›˜æ°¸è¿œå¯å†™**
- ğŸš« **ç¦æ­¢é¢‘ç¹ sync**

---

### 1ï¸âƒ£1ï¸âƒ£ æ—¥å¿—åº“ï¼ˆsyslogï¼‰

#### ç”¨é€”

- è°ƒè¯•
- è¿ç»´
- æ’éšœ

#### æœ€ä½³å®è·µ

1. **æ—¥å¿—åˆ†çº§**
2. **æ”¯æŒå¼‚æ­¥**
3. **å…³é”®è·¯å¾„æ—¥å¿—æœ€å°åŒ–**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢é«˜é¢‘å¾ªç¯æ‰“ ERROR**
- ğŸš« **ç¦æ­¢ UI çº¿ç¨‹å¤§é‡æ—¥å¿—**
- ğŸš« **ç¦æ­¢ printf æ»¡å¤©é£**

---

### 1ï¸âƒ£2ï¸âƒ£ å®šæ—¶ / æ—¶é—´åº“ï¼ˆchrono / timerfdï¼‰

#### ç”¨é€”

- å¿ƒè·³
- è¶…æ—¶
- ä»»åŠ¡è°ƒåº¦

#### æœ€ä½³å®è·µ

1. **ä½¿ç”¨ monotonic clock**
2. **å®šæ—¶é€»è¾‘é›†ä¸­ç®¡ç†**

#### é¿å‘æŒ‡å—

- ğŸš« **ç¦æ­¢ç”¨ wall clock åšä¸šåŠ¡åˆ¤æ–­**
- ğŸš« **ç¦æ­¢ sleep é©±åŠ¨é€»è¾‘**

---

## ä¹ã€åº“ â†’ çº¿ç¨‹ â†’ æ¨¡å—æ˜ å°„è¡¨

| åº“å | å…è®¸ä½¿ç”¨çš„çº¿ç¨‹ | ç¦æ­¢ä½¿ç”¨çš„çº¿ç¨‹ | å°è£…æ¨¡å— |
|------|--------------|--------------|---------|
| **std::thread** | æ‰€æœ‰çº¿ç¨‹ | - | ThreadBaseã€WorkerThread |
| **LVGL** | UI ä¸»çº¿ç¨‹ | æ‰€æœ‰å…¶ä»–çº¿ç¨‹ | UISystem |
| **libcurl** | NetworkWorker | UI çº¿ç¨‹ã€Player çº¿ç¨‹ | HttpService |
| **libwebsockets** | NetworkWorker | UI çº¿ç¨‹ã€Player çº¿ç¨‹ | WebSocketService |
| **TPlayer** | PlayerAdapter | UI çº¿ç¨‹ã€Network çº¿ç¨‹ | PlayerAdapter |
| **ALSA** | PlayerAdapter | UI çº¿ç¨‹ã€Network çº¿ç¨‹ | AudioManager |
| **SQLite3** | HistoryServiceï¼ˆä¸“ç”¨ DB çº¿ç¨‹ï¼‰ | UI çº¿ç¨‹ã€å…¶ä»–çº¿ç¨‹ | HistoryService |
| **cJSON** | NetworkWorker | UI çº¿ç¨‹ã€Player çº¿ç¨‹ | JsonHelper |
| **POSIX æ–‡ä»¶ IO** | NetworkWorkerã€ä¸“ç”¨ IO çº¿ç¨‹ | UI çº¿ç¨‹ | FileService |
| **syslog** | æ‰€æœ‰çº¿ç¨‹ | - | ç›´æ¥ä½¿ç”¨ |
| **chrono / timerfd** | æ‰€æœ‰çº¿ç¨‹ | - | TimerManager |

---

## åã€æ–°äºº Onboardingï¼šè¿™äº›åº“åƒä¸‡åˆ«ä¹±ç”¨

### ğŸš« ç»å¯¹ç¦æ­¢ï¼ˆè¿åå³é©³å›ï¼‰

1. **è·¨çº¿ç¨‹ä½¿ç”¨ LVGL**
   - âŒ åœ¨ NetworkWorker ä¸­è°ƒç”¨ `lv_label_set_text()`
   - âœ… é€šè¿‡ Event é€šçŸ¥ UI çº¿ç¨‹æ›´æ–°

2. **UI çº¿ç¨‹åšç½‘ç»œè¯·æ±‚**
   - âŒ åœ¨ UI å›è°ƒä¸­è°ƒç”¨ `curl_easy_perform()`
   - âœ… æŠ•é€’åˆ° NetworkWorker

3. **UI çº¿ç¨‹æ“ä½œæ•°æ®åº“**
   - âŒ åœ¨ UI å›è°ƒä¸­è°ƒç”¨ `sqlite3_exec()`
   - âœ… é€šè¿‡ HistoryService å¼‚æ­¥æ“ä½œ

4. **UI çº¿ç¨‹è§£æ JSON**
   - âŒ åœ¨ UI å›è°ƒä¸­è°ƒç”¨ `cJSON_Parse()`
   - âœ… åœ¨ NetworkWorker ä¸­è§£æ

5. **UI çº¿ç¨‹åšæ–‡ä»¶ IO**
   - âŒ åœ¨ UI å›è°ƒä¸­è°ƒç”¨ `fopen()`
   - âœ… åœ¨ NetworkWorker ä¸­æ‰§è¡Œ

6. **å¤šçº¿ç¨‹å¹¶å‘è°ƒç”¨ TPlayer**
   - âŒ å¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ `tplayer_play()`
   - âœ… é€šè¿‡ PlayerAdapter ä¸²è¡ŒåŒ–

7. **ä½¿ç”¨ detach**
   - âŒ `thread.detach()`
   - âœ… æ˜¾å¼ `join()`

8. **ä½¿ç”¨ wall clock åšä¸šåŠ¡åˆ¤æ–­**
   - âŒ `time(nullptr)`
   - âœ… `clock_gettime(CLOCK_MONOTONIC, &ts)`

---

### âš ï¸ å¸¸è§é”™è¯¯æ¨¡å¼

| é”™è¯¯æ¨¡å¼ | æ­£ç¡®åšæ³• |
|---------|---------|
| UI å›è°ƒä¸­åšé˜»å¡æ“ä½œ | æŠ•é€’åˆ°å·¥ä½œçº¿ç¨‹ |
| é«˜é¢‘å¾ªç¯ä¸­æ‰“å° ERROR | è®¡æ•° + å®šæœŸä¸ŠæŠ¥ |
| åŠ¨æ€æ‹¼ SQL | ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ |
| ä¿¡ä»»å¤–éƒ¨ JSON | æ ¡éªŒå­—æ®µå®Œæ•´æ€§ |
| é¢‘ç¹åˆ›å»º/é”€æ¯ lv_obj | å¤ç”¨å¯¹è±¡æ±  |
| æ—  timeout çš„ç½‘ç»œè¯·æ±‚ | æ˜¾å¼è®¾ç½® timeout |

---

## åä¸€ã€çº¿ç¨‹ç™½åå•

### âœ… å…è®¸çš„çº¿ç¨‹ï¼ˆç™½åå•ï¼‰

| çº¿ç¨‹ | ç±»å | Singleton | å¯åŠ¨æ–¹å¼ | åœæ­¢æ–¹å¼ | çŠ¶æ€ |
|------|------|-----------|---------|---------|------|
| **UI/LVGL ä¸»çº¿ç¨‹** | `UISystem` | âœ… æ˜¯ | AppRuntime::startAll() | AppRuntime::stopAll() | âœ… å¿…é¡» |
| **Event Loop** | `EventBus` | âœ… æ˜¯ | AppRuntime::startAll() | AppRuntime::stopAll() | âœ… å¿…é¡» |
| **Network Worker** | `NetworkWorker` | âœ… æ˜¯ | AppRuntime::startAll() | AppRuntime::stopAll() | âœ… å¿…é¡» |
| **Player Worker** | `PlayerAdapter` | âœ… æ˜¯ | AppRuntime::startAll() | AppRuntime::stopAll() | âœ… å¿…é¡» |
| **LogUpload** | `LogUploadService` | âœ… æ˜¯ | AppRuntime::startAll() | AppRuntime::stopAll() | âœ… å¿…é¡» |
| **Upgrade Checker** | `UpgradeService` | âœ… æ˜¯ | AppRuntime::startAll() | AppRuntime::stopAll() | âœ… å¿…é¡» |

### âŒ ç¦æ­¢çš„çº¿ç¨‹

| åœºæ™¯ | é”™è¯¯åšæ³• | æ­£ç¡®åšæ³• |
|------|---------|---------|
| **é¡µé¢çº§çº¿ç¨‹** | åˆ›å»º `SearchThread` | æŠ•é€’åˆ° `NetworkWorker::instance().post()` |
| **ä¸´æ—¶ä¸šåŠ¡çº¿ç¨‹** | åˆ›å»º `HttpThread` | æŠ•é€’åˆ° `NetworkWorker::instance().post()` |
| **æ’­æ”¾çº¿ç¨‹** | æ¯æ¬¡æ’­æ”¾åˆ›å»ºçº¿ç¨‹ | ä½¿ç”¨å¸¸é©» `PlayerAdapter::instance()` |
| **UIå›è°ƒçº¿ç¨‹** | æŒ‰é’®å›è°ƒä¸­åˆ›å»ºçº¿ç¨‹ | å‘é€å‘½ä»¤åˆ°å·¥ä½œçº¿ç¨‹é˜Ÿåˆ— |

**ç¡¬è§„åˆ™**ï¼š

> **ç™½åå•å¤–çš„çº¿ç¨‹ä¸€å¾‹ç¦æ­¢åˆ›å»ºã€‚**

---

## åäºŒã€Singleton ç™½åå•

### âœ… å…è®¸çš„ Singletonï¼ˆç™½åå•ï¼‰

| Singleton | ç±»å | åŸå›  | ç”Ÿå‘½å‘¨æœŸ | çŠ¶æ€ |
|-----------|------|------|---------|------|
| **UI/LVGL ä¸»çº¿ç¨‹** | `UISystem::instance()` | å…¨å±€å”¯ä¸€ displayã€input | App ç”Ÿå‘½å‘¨æœŸ | âœ… å¿…é¡» |
| **Event Dispatch** | `EventBus::getInstance()` | å…¨å±€äº‹ä»¶æ€»çº¿ | App ç”Ÿå‘½å‘¨æœŸ | âœ… å¿…é¡» |
| **Network Worker** | `NetworkWorker::instance()` | libcurl å…¨å±€åˆå§‹åŒ– | App ç”Ÿå‘½å‘¨æœŸ | âœ… å¿…é¡» |
| **Player Worker** | `PlayerAdapter::instance()` | TPlayer å…¨å±€å”¯ä¸€ | App ç”Ÿå‘½å‘¨æœŸ | âœ… å¿…é¡» |
| **LogUpload** | `LogUploadService::instance()` | å…¨å±€æ—¥å¿—ä¸Šä¼ æœåŠ¡ | App ç”Ÿå‘½å‘¨æœŸ | âœ… å¿…é¡» |
| **Upgrade Checker** | `UpgradeService::instance()` | å…¨å±€å‡çº§æ£€æµ‹ | App ç”Ÿå‘½å‘¨æœŸ | âœ… å¿…é¡» |
| **AppRuntime** | `AppRuntime::instance()` | å…¨å±€çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸæ€»æ§ | App ç”Ÿå‘½å‘¨æœŸ | âœ… å¿…é¡» |

### âŒ ç¦æ­¢çš„ Singleton

| åœºæ™¯ | é”™è¯¯åšæ³• | æ­£ç¡®åšæ³• |
|------|---------|---------|
| **é¡µé¢çº§ Singleton** | `SearchPage::instance()` | ä½¿ç”¨å•ä¾‹é¡µé¢ç®¡ç†å™¨ |
| **ä¸´æ—¶ä¸šåŠ¡ Singleton** | `HttpClient::instance()` | ä½¿ç”¨ `NetworkWorker` |
| **æ•°æ®æ¨¡å‹ Singleton** | `SongList::instance()` | ä½¿ç”¨æ™®é€šå¯¹è±¡æˆ–é™æ€æ•°æ® |

**ç¡¬è§„åˆ™**ï¼š

> **ç™½åå•å¤–çš„ Singleton ä¸€å¾‹ç¦æ­¢åˆ›å»ºã€‚**

---

## åä¸‰ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†

### å¯åŠ¨é¡ºåºï¼ˆç”± AppRuntime æ§åˆ¶ï¼‰

```
1. EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼Œæ‰€æœ‰æ¨¡å—ä¾èµ–ï¼‰
2. UISystemï¼ˆUIä¸»çº¿ç¨‹ï¼Œæ‰€æœ‰UIæ“ä½œä¾èµ–ï¼‰
3. NetworkWorkerï¼ˆç½‘ç»œçº¿ç¨‹ï¼Œä¸šåŠ¡æ¨¡å—å¯èƒ½ä¾èµ–ï¼‰
4. PlayerAdapterï¼ˆæ’­æ”¾å™¨çº¿ç¨‹ï¼Œæ’­æ”¾åŠŸèƒ½ä¾èµ–ï¼‰
5. LogUploadServiceï¼ˆæ—¥å¿—ä¸Šä¼ ï¼Œä½ä¼˜å…ˆçº§ï¼‰
6. UpgradeServiceï¼ˆå‡çº§æ£€æµ‹ï¼Œä½ä¼˜å…ˆçº§ï¼‰
```

### åœæ­¢é¡ºåºï¼ˆç”± AppRuntime æ§åˆ¶ï¼‰

```
1. UpgradeServiceï¼ˆå‡çº§æ£€æµ‹ï¼Œä½ä¼˜å…ˆçº§ï¼‰
2. LogUploadServiceï¼ˆæ—¥å¿—ä¸Šä¼ ï¼Œä½ä¼˜å…ˆçº§ï¼‰
3. PlayerAdapterï¼ˆæ’­æ”¾å™¨çº¿ç¨‹ï¼Œä¾èµ–è€…å…ˆåœæ­¢ï¼‰
4. NetworkWorkerï¼ˆç½‘ç»œçº¿ç¨‹ï¼Œä¾èµ–è€…å…ˆåœæ­¢ï¼‰
5. EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼Œè¢«ä¾èµ–è€…ååœæ­¢ï¼‰
6. UISystemï¼ˆUIä¸»çº¿ç¨‹ï¼Œæœ€ååœæ­¢ï¼‰
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [KTV_Appçº¿ç¨‹Singletonç¼–ç è§„èŒƒï¼ˆæœ€ç»ˆç‰ˆï¼‰.md](./KTV_Appçº¿ç¨‹Singletonç¼–ç è§„èŒƒï¼ˆæœ€ç»ˆç‰ˆï¼‰.md) â­â­â­ **å¿…è¯»**
- [ä»£ç å®¡æŸ¥Checklist.md](../ä»£ç å®¡æŸ¥Checklist.md) â­â­â­ **å¿…è¯»**
- [åº”ç”¨å¯åŠ¨é˜¶æ®µåˆ’åˆ†ä¸é€€å‡ºåŸåˆ™.md](../architecture/åº”ç”¨å¯åŠ¨é˜¶æ®µåˆ’åˆ†ä¸é€€å‡ºåŸåˆ™.md) â­â­â­ **å¿…è¯»**
- [AppRuntimeçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸæ€»æ§è®¾è®¡.md](../architecture/AppRuntimeçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸæ€»æ§è®¾è®¡.md) â­â­â­ **å¿…è¯»**

---

**æœ€åæ›´æ–°**: 2025-12-30  
**ç»´æŠ¤è€…**: é¡¹ç›®å›¢é˜Ÿ  
**çŠ¶æ€**: âœ… æ ¸å¿ƒæ–‡æ¡£ï¼ˆå·¥ç¨‹è§„èŒƒ - é‡äº§çº§å®Œæ•´æŒ‡å—ï¼‰


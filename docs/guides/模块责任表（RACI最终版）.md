# 模块责任表（RACI 最终版）

> **文档版本**：v1.0  
> **最后更新**：2025-12-30  
> **状态**：✅ 定版（不可再争）  
> **用途**：明确模块责任边界，直接发群执行

---

## 📋 RACI 说明

- **R = Responsible（实际写代码）**：负责实现
- **A = Accountable（最终责任 / 拍板）**：最终决策权
- **C = Consulted（可参与讨论）**：可参与讨论，但无决策权
- **I = Informed（只需知情）**：只需知情，无需参与

---

## 1️⃣ 系统骨架层（不可替换）

| 模块 | PM | 工程师 A（UI） | 工程师 B（Service） |
|------|-----|---------------|-------------------|
| **整体架构分层** | **A** | I | I |
| **模块边界定义** | **A** | I | I |
| **Event ID / Event 结构** | **A** | C | C |
| **Controller 规则** | **A** | I | I |
| **线程模型（是否单线程）** | **A** | I | I |
| **libcurl 是否独立线程** | **A** | I | I |
| **Singleton 策略** | **A** | I | I |
| **架构升级决策** | **A** | I | I |

> **说明**：  
> **系统骨架 = 只能你拍板，没人能"顺手改"**

---

## 2️⃣ UI 层（可替换）

| 模块 | PM | 工程师 A | 工程师 B |
|------|-----|---------|---------|
| **LVGL 页面** | I | **R** | I |
| **控件布局** | I | **R** | I |
| **页面生命周期（show/hide）** | C | **R** | I |
| **UI 状态（loading/empty/error）** | **A** | **R** | I |
| **UI 事件产生** | I | **R** | I |

> **说明**：  
> **UI 层 = 工程师 A 负责实现，PM 只决策 UI 状态策略**

---

## 3️⃣ Service / 数据层（中等风险）

| 模块 | PM | 工程师 A | 工程师 B |
|------|-----|---------|---------|
| **NetworkService（libcurl）** | **A** | I | **R** |
| **JSON 解析** | I | I | **R** |
| **Repo（数据仓库）** | C | I | **R** |
| **Category / Song / Rank Service** | I | I | **R** |
| **SQLite / 本地存储** | C | I | **R** |

> **说明**：  
> **Service 层 = 工程师 B 负责实现，PM 决策 NetworkService 接口**

---

## 4️⃣ Adapter / 平台相关（高风险）

| 模块 | PM | 工程师 A | 工程师 B |
|------|-----|---------|---------|
| **PlayerAdapter** | **A** | I | R（按接口） |
| **StorageAdapter** | **A** | I | R（按接口） |
| **NetworkAdapter** | **A** | I | R（按接口） |

> **说明**：  
> **Adapter 接口你定义，实现可代写，但必须你 review**

---

## 5️⃣ 启动 / 运维 / 调试

| 模块 | PM | 工程师 A | 工程师 B |
|------|-----|---------|---------|
| **main / 启动流程** | **A** | I | R |
| **日志策略（syslog）** | **A** | I | R |
| **调试 / 排错方式** | **A** | I | I |

> **说明**：  
> **启动流程和日志策略 = PM 决策，工程师实现**

---

## 📌 责任边界总结

### PM 的决策权（A）

1. **系统骨架**：架构分层、模块边界、Event 结构、Controller 规则、线程模型、Singleton 策略
2. **架构升级**：任何架构升级决策
3. **Adapter 接口**：PlayerAdapter、StorageAdapter、NetworkAdapter 接口定义
4. **UI 状态策略**：loading/empty/error 状态定义
5. **NetworkService 接口**：libcurl 封装接口
6. **启动流程**：main 函数、日志策略、调试方式

### 工程师 A 的职责（R）

1. **LVGL 页面**：页面实现、控件布局
2. **页面生命周期**：show/hide 实现
3. **UI 事件产生**：用户交互事件

### 工程师 B 的职责（R）

1. **Service 实现**：Category、Song、Rank Service
2. **NetworkService 实现**：libcurl 封装实现
3. **JSON 解析**：数据解析逻辑
4. **Repo 实现**：数据仓库实现
5. **SQLite / 本地存储**：数据库操作
6. **Adapter 实现**：按 PM 定义的接口实现

---

## 🚫 禁止越界

- ❌ **工程师不能决策架构**：任何架构变更必须 PM 批准
- ❌ **UI 层不能直接调用 Service**：必须通过 Event
- ❌ **Service 层不能操作 UI**：必须通过 Event 返回
- ❌ **工程师不能自行引入线程**：必须 PM 批准
- ❌ **工程师不能修改 Adapter 接口**：只能实现

---

## 📚 相关文档

- [Tina_KTV_MVP产品与技术协作规范v1.0.md](./Tina_KTV_MVP产品与技术协作规范v1.0.md) ⭐⭐⭐ **必读**
- [PM一页纸作战手册（每日5分钟）.md](./PM一页纸作战手册（每日5分钟）.md) ⭐⭐⭐ **必读**

---

**最后更新**: 2025-12-30  
**状态**: ✅ 定版（不可再争）  
**维护者**: Tech Product Owner


# MVP阶段不需要的选型与文档清单

> **文档版本**：v1.0  
> **最后更新**：2025-12-30  
> **状态**：✅ 参考文档  
> **目标**：明确MVP阶段不需要的技术选型和文档，避免过度设计

---

## 📋 目录

1. [技术选型（MVP不需要）](#一-技术选型mvp不需要)
2. [功能相关文档（MVP不需要）](#二-功能相关文档mvp不需要)
3. [优化相关文档（MVP阶段不需要）](#三-优化相关文档mvp阶段不需要)
4. [稳定性设计（部分功能MVP不需要）](#四-稳定性设计部分功能mvp不需要)
5. [建议处理方式](#五-建议处理方式)

---

## 一、技术选型（MVP不需要）

### ❌ 明确不需要的库

| 库名 | 原因 | 状态 | 备注 |
|------|------|------|------|
| **ALSA** | MVP版本不启用录音功能 | ❌ 不需要 | 保持stub实现，未来可启用 |
| **SDL2** | F133使用framebuffer+evdev | ❌ 不需要 | 已清理SDL相关代码 |
| **moodycamel::ConcurrentQueue** | 统一使用标准库 | ❌ 不需要 | 已明确不使用，使用std::queue |
| **RingBuffer** | MVP阶段事件频率低，std::queue够用 | ❌ 不需要 | 预量产阶段再考虑 |

### ✅ MVP阶段使用的技术

| 技术 | 说明 | 状态 |
|------|------|------|
| **std::queue + std::mutex + condition_variable** | 消息队列（标准库） | ✅ 必需 |
| **LVGL 8.3.11** | UI框架 | ✅ 必需 |
| **TPlayer** | 媒体播放器（F133 SDK） | ✅ 必需 |
| **libcurl** | HTTP客户端 | ✅ 必需 |
| **cJSON** | JSON解析 | ✅ 必需 |
| **libwebsockets** | WebSocket长连接 | ✅ 必需 |
| **syslog** | 日志系统（F133平台） | ✅ 必需 |

---

## 二、功能相关文档（MVP不需要）

### ❌ MVP不包含的功能文档

| 文档 | 原因 | 状态 | 建议 |
|------|------|------|------|
| **[语音点歌与唱歌打分功能设计.md](./语音点歌与唱歌打分功能设计.md)** | MVP不包含语音点歌和唱歌打分 | ❌ MVP不需要 | 保留作为v2.0+参考 |
| **收藏功能相关文档** | MVP不包含"我的收藏"功能 | ❌ MVP不需要 | 如果存在，保留作为未来参考 |
| **推荐功能相关文档** | MVP不包含"猜你喜欢"功能 | ❌ MVP不需要 | 如果存在，保留作为未来参考 |

### ✅ MVP需要的功能文档

| 文档 | 说明 | 状态 |
|------|------|------|
| **[MVP版本需求整理（最终版）.md](./MVP版本需求整理（最终版）.md)** | MVP需求定义 | ✅ 必需 |
| **[MVP版本UI设计说明.md](./architecture/MVP版本UI设计说明.md)** | MVP UI设计 | ✅ 必需 |
| **[VIP会员与微信扫码功能设计.md](./VIP会员与微信扫码功能设计.md)** | MVP包含的功能 | ✅ 必需 |
| **[WebSocket长连接实现方案.md](./WebSocket长连接实现方案.md)** | MVP包含的功能 | ✅ 必需 |

---

## 三、优化相关文档（MVP阶段不需要）

### ❌ MVP阶段不需要的优化文档

| 文档 | 原因 | 状态 | 建议 |
|------|------|------|------|
| **[std_queue到RingBuffer迁移指南.md](./std_queue到RingBuffer迁移指南.md)** | 文档明确说明"MVP阶段，事件频率低，不需要迁移" | ❌ MVP不需要 | 保留作为预量产阶段参考 |

**文档中的说明**：
> **迁移触发条件**：
> - MVP阶段，事件频率低 → ❌ **不需要** → std::queue 完全够用
> - 预量产阶段，追求稳定性 → ✅ **推荐迁移**

### ✅ MVP阶段使用的队列方案

- **std::queue + std::mutex + condition_variable**（标准库）
- 完全满足MVP阶段需求
- 实现简单，维护成本低

---

## 四、稳定性设计（部分功能MVP不需要）

### 📋 稳定性设计文档分析

**[KTV_App稳定性与自愈设计说明.md](./sdk/KTV_App稳定性与自愈设计说明.md)** 标注为"量产必读"，但部分功能在MVP阶段可能不需要：

| 功能模块 | MVP阶段是否需要 | 理由 |
|---------|---------------|------|
| **进程级 Watchdog / 自愈机制** | ⚠️ **建议有** | 基础稳定性保障 |
| **线程生命周期 & 退出顺序** | ✅ **必需** | 避免内存泄漏 |
| **日志 → 远程上传闭环** | ❌ **不需要** | MVP阶段本地日志足够，远程上传是量产需求 |
| **应用升级的回滚策略** | ❌ **不需要** | MVP阶段手动升级即可，回滚策略是量产需求 |
| **配置中心的只读/可写边界** | ⚠️ **简化版** | MVP阶段配置简单，不需要复杂的配置中心 |
| **异常兜底 UI** | ✅ **必需** | 基础用户体验保障 |

### 建议

- **MVP阶段**：实现基础稳定性（Watchdog、线程生命周期、异常UI）
- **预量产阶段**：补充完整稳定性设计（远程日志、升级回滚、配置中心）

---

## 五、建议处理方式

### 1. 文档处理

#### ✅ 保留但标注为"未来参考"

以下文档保留，但应在文档开头明确标注：

```markdown
> **⚠️ 重要提示**：本文档内容适用于v2.0+版本，MVP阶段不需要。
> **MVP阶段**：请参考 [MVP版本需求整理（最终版）.md](./MVP版本需求整理（最终版）.md)
```

**需要标注的文档**：
- `语音点歌与唱歌打分功能设计.md`
- `std_queue到RingBuffer迁移指南.md`
- `KTV_App稳定性与自愈设计说明.md`（部分功能）

#### ✅ 更新文档索引

在 `文档索引.md` 中，将MVP不需要的文档标注为"未来参考"或"预量产阶段"。

### 2. 代码处理

#### ✅ 已清理的代码

- ✅ SDL2相关代码已清理
- ✅ moodycamel::ConcurrentQueue已替换为标准库

#### ⚠️ 需要保持的代码

- ✅ ALSA录音接口保持stub实现（不链接ALSA库）
- ✅ 未来功能接口已预留，但不启用

### 3. 技术选型确认

#### ✅ MVP阶段技术栈（最终确认）

```
必需库（5个）：
1. LVGL 8.3.11
2. TPlayer (F133 SDK)
3. libcurl
4. cJSON
5. libwebsockets

标准库：
- std::queue + std::mutex + condition_variable

系统库：
- syslog (F133平台)

可选库：
- inih (配置解析)
```

#### ❌ MVP阶段明确不使用的技术

- ❌ ALSA（录音）
- ❌ SDL2
- ❌ moodycamel::ConcurrentQueue
- ❌ RingBuffer（预量产再考虑）

---

## 六、MVP阶段文档优先级

### ⭐⭐⭐ 必读文档（MVP阶段）

1. **[MVP版本需求整理（最终版）.md](./MVP版本需求整理（最终版）.md)** - MVP需求定义
2. **[线程架构基线（最终版）.md](./线程架构基线（最终版）.md)** - 线程架构
3. **[消息队列完整指南.md](./消息队列完整指南.md)** - 消息队列实现
4. **[KTV_App线程Singleton编码规范（最终版）.md](./guides/KTV_App线程Singleton编码规范（最终版）.md)** - 线程编码规范

### ⭐⭐ 推荐文档（MVP阶段）

1. **[MVP版本UI设计说明.md](./architecture/MVP版本UI设计说明.md)** - UI设计
2. **[VIP会员与微信扫码功能设计.md](./VIP会员与微信扫码功能设计.md)** - 功能设计
3. **[WebSocket长连接实现方案.md](./WebSocket长连接实现方案.md)** - WebSocket实现

### ⭐ 未来参考（MVP阶段不需要）

1. **[语音点歌与唱歌打分功能设计.md](./语音点歌与唱歌打分功能设计.md)** - v2.0+功能
2. **[std_queue到RingBuffer迁移指南.md](./std_queue到RingBuffer迁移指南.md)** - 预量产优化
3. **[KTV_App稳定性与自愈设计说明.md](./sdk/KTV_App稳定性与自愈设计说明.md)** - 部分功能（远程日志、升级回滚）是量产需求

---

## 七、总结

### MVP阶段不需要的选型

1. **技术库**：ALSA、SDL2、moodycamel::ConcurrentQueue、RingBuffer
2. **功能**：语音点歌、唱歌打分、我的收藏、猜你喜欢
3. **优化**：RingBuffer迁移（预量产再考虑）
4. **稳定性**：远程日志上传、升级回滚策略（量产需求）

### MVP阶段需要的选型

1. **技术库**：LVGL、TPlayer、libcurl、cJSON、libwebsockets、std::queue
2. **功能**：首页、历史记录、VIP会员、搜索、点歌、播放控制
3. **稳定性**：基础Watchdog、线程生命周期、异常UI

### 建议

- ✅ **保持文档完整性**：保留未来功能文档，但明确标注适用阶段
- ✅ **避免过度设计**：MVP阶段使用简单可靠的技术栈
- ✅ **预留扩展性**：接口已预留，但不启用不需要的功能
- ✅ **明确优先级**：聚焦MVP核心功能，优化和高级功能留到预量产阶段

---

**最后更新**: 2025-12-30  
**维护者**: 项目团队  
**状态**: ✅ 参考文档


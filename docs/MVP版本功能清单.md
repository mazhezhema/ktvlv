# MVP版本功能清单

> **文档版本**：v1.0  
> **最后更新**：2025-12-30  
> **状态**：⚠️ **参考文档（内容过时）**（内容已整合到 [F133第一期需求文档.md](./F133第一期需求文档.md)）  
> **相关文档**：详见 [F133第一期需求文档.md](./F133第一期需求文档.md) 或 [MVP版本需求整理（最终版）.md](./MVP版本需求整理（最终版）.md)

> ⚠️ **重要提示**：本文档中的库清单信息已过时，特别是 `moodycamel::ConcurrentQueue` 相关内容。  
> **技术决策**：项目统一使用 `std::queue + std::mutex + condition_variable`（标准库），**不使用 moodycamel**。  
> **请以最新文档为准**：[F133第一期需求文档.md](./F133第一期需求文档.md) 和 [消息队列选型技术决策.md](./guides/消息队列选型技术决策.md)

## 📋 功能范围

### ✅ 包含的功能（第一期）

#### 1. 顶部菜单栏
- ✅ **首页** - 主界面（歌曲浏览、分类、排行榜）
- ✅ **历史记录** - 显示最近播放的50首歌曲（FIFO队列）
- ✅ **VIP会员中心** - 会员功能（查看会员信息、扫码激活等）

#### 2. 核心功能
- ✅ 歌曲浏览（列表、分类、排行榜）
- ✅ 搜索（歌名、歌手，文本输入）
- ✅ 点歌（添加到播放列表）
- ✅ 播放控制（播放、暂停、切歌、重唱）
- ✅ 音轨切换（原唱/伴奏）- 使用 `TPlayerSwitchAudio`
- ✅ 音量控制 - 使用 `TPlayerSetVolume`
- ✅ 播放进度显示
- ✅ 历史记录 - 自动记录最近播放的50首歌曲（FIFO队列，持久化存储）
- ✅ VIP会员功能 - 会员状态显示、VIP歌曲标识、会员权益展示
- ✅ 微信扫码点歌 - 扫码功能（通过微信扫码进行点歌或激活）

---

### ❌ 不包含的功能（第一期暂不做）

#### 1. 菜单功能
- ❌ **猜你喜欢** - 推荐算法（未来功能）
- ❌ **我的收藏** - 收藏功能（未来功能）

#### 2. 交互功能
- ❌ **语音点歌** - 语音输入搜索（未来功能，v2.0+）
- ❌ **唱歌打分** - 录音评分功能（未来功能，v2.0+）

#### 3. 其他功能
- ❌ **系统音效** - UI提示音（不需要，所有播放由TPlayer处理）
- ❌ **录音功能** - ALSA录音（不需要，保持stub实现）

---

## 🔧 技术实现状态

### 当前实现（MVP版本）

| 功能模块 | 实现状态 | 说明 |
|---------|---------|------|
| **UI框架** | ✅ 已实现 | LVGL 8.3.11 |
| **播放器** | ✅ 已实现 | TPlayer（F133平台） |
| **网络通信** | ✅ 已实现 | libcurl（HTTP REST API） |
| **数据解析** | ✅ 已实现 | cJSON（JSON解析） |
| **历史记录** | ✅ 已实现 | FIFO队列，最多50首 |
| **搜索功能** | ✅ 已实现 | 文本输入搜索 |
| **音轨切换** | ✅ 已实现 | TPlayer API |
| **录音功能** | ❌ stub实现 | 接口已扩展，但不启用 |

### 未来功能（v2.0+）

| 功能模块 | 状态 | 说明 |
|---------|------|------|
| **语音点歌** | ⚠️ 接口已就绪 | 需要启用 `KTV_USE_ALSA_RECORD` |
| **唱歌打分** | ⚠️ 接口已就绪 | 需要启用 `KTV_USE_ALSA_RECORD` |
| **我的收藏** | ⚠️ 待设计 | 需要服务器API支持 |
| **猜你喜欢** | ⚠️ 待设计 | 需要推荐算法 |

---

## 📦 依赖库状态

### MVP版本需要的库

| 库名 | 用途 | 状态 |
|------|------|------|
| **LVGL 8.3.11** | UI框架 | ✅ 必需 |
| **TPlayer** | 媒体播放 | ✅ 必需（F133 SDK） |
| **libcurl** | HTTP客户端 | ✅ 必需 |
| **cJSON** | JSON解析 | ✅ 必需 |
| **std::queue + std::mutex** | 消息队列（标准库） | ✅ 必需 |
| **syslog** | 日志系统（F133平台） | ✅ 必需（F133） |
| **plog** | 日志系统（Windows开发阶段） | ⚠️ 可选（Windows开发） |
| **inih** | 配置解析 | ✅ 可选 |

### 不需要的库（MVP版本）

| 库名 | 用途 | 状态 |
|------|------|------|
| **ALSA** | 录音功能 | ❌ 不需要（保持stub） |
| **SDL2** | 图形窗口（F133） | ❌ 不需要（使用framebuffer） |
| **std::queue + std::mutex** | 消息队列 | ✅ 已采用（标准库），不使用 moodycamel |

---

## 🎯 功能优先级

### Phase 1（核心功能）- 已完成
1. ✅ 顶部菜单栏（首页/历史记录）
2. ✅ 首页歌曲列表和搜索
3. ✅ 播放控制（播放、暂停、切歌、重唱）
4. ✅ 音轨切换（原唱/伴奏）
5. ✅ 历史记录基本功能

### Phase 2（完善功能）- 进行中
1. ✅ 历史记录持久化（保存到文件）
2. ✅ 历史记录点击播放
3. ✅ 历史记录去重和排序
4. ⚠️ 播放列表管理（已点歌曲队列）

### Phase 3（优化）- 未来
1. ⚠️ 性能优化
2. ⚠️ 内存优化
3. ⚠️ 稳定性测试
4. ⚠️ 弱网环境测试

### Phase 4（未来功能）- v2.0+
1. ⚠️ 语音点歌
2. ⚠️ 唱歌打分
3. ⚠️ 我的收藏
4. ⚠️ 猜你喜欢

---

## 📝 注意事项

### 录音功能
- ✅ **接口已扩展** - `audio_driver.h` 已添加录音接口
- ✅ **实现已就绪** - `audio_alsa.c` 已实现录音功能（可选）
- ❌ **MVP版本不启用** - 保持 stub 实现，不链接 ALSA 库
- ⚠️ **未来启用方式** - 编译时定义 `KTV_USE_ALSA_RECORD`

### 收藏功能
- ❌ **MVP版本不包含** - 不需要实现收藏相关UI和逻辑
- ⚠️ **服务器API** - 未来需要服务器端支持收藏API

### 推荐功能
- ❌ **MVP版本不包含** - 不需要实现推荐算法
- ⚠️ **服务器API** - 未来需要服务器端支持推荐API

---

## 📚 相关文档

- **项目架构设计总览**: [项目架构设计总览.md](./architecture/项目架构设计总览.md)
- **MVP版本UI设计**: [MVP版本UI设计说明.md](./architecture/MVP版本UI设计说明.md)
- **F133移植方案**: [F133_KTV移植方案总结.md](./guides/F133_KTV移植方案总结.md)
- **语音点歌设计**: [语音点歌与唱歌打分功能设计.md](./语音点歌与唱歌打分功能设计.md)
- **F133平台库清单**: [F133平台库清单.md](./F133平台库清单.md)

---

## 🎯 总结

### MVP版本（第一期）功能范围

**包含**：
- ✅ 首页、历史记录、VIP会员中心
- ✅ 搜索、点歌、播放控制
- ✅ 音轨切换、音量控制
- ✅ 历史记录（最多50首）
- ✅ VIP会员功能（会员状态、VIP歌曲标识）
- ✅ 微信扫码点歌（扫码激活、扫码点歌）

**不包含**：
- ❌ 我的收藏
- ❌ 猜你喜欢
- ❌ 语音点歌
- ❌ 唱歌打分

### 技术状态

- ✅ **核心功能已实现** - UI、播放器、网络通信
- ✅ **录音接口已扩展** - 未来可直接启用
- ❌ **录音功能不启用** - MVP版本保持stub实现
- ✅ **架构已就绪** - 未来功能可平滑扩展

---

**最后更新**: 2025-12-30


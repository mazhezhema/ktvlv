# 快速构建EXE说明

## 🚀 快速构建（日常使用）

**直接运行：**
```batch
build_fast.bat
```

### 特点
- ✅ **增量构建**：只编译修改的文件，不重新配置CMake
- ✅ **自动复制DLL**：构建后自动复制SDL2.dll、libcurl.dll等到输出目录
- ✅ **自动复制配置**：自动复制config.ini到输出目录
- ✅ **并行编译**：使用8个并行任务加速
- ✅ **Release模式**：生成优化后的exe

### 输出位置
```
build_ninja2/
├── ktvlv.exe      # 主程序
├── SDL2.dll       # 自动复制
├── libcurl.dll    # 自动复制
├── zlib1.dll      # 自动复制（如需要）
└── config.ini     # 自动复制
```

## 📝 首次构建（仅需一次）

如果 `build_ninja2` 目录不存在或需要重新配置：

```batch
build_nt.bat
```

或手动配置：
```batch
cmake -S . -B build_ninja2 -G Ninja ^
  -DCMAKE_TOOLCHAIN_FILE=D:/vcpkg/scripts/buildsystems/vcpkg.cmake ^
  -DVCPKG_TARGET_TRIPLET=x64-windows ^
  -DCMAKE_BUILD_TYPE=Release
```

## ⚡ 优化要点

1. **使用 `build_fast.bat`** - 日常开发专用，最快
2. **避免频繁重新配置** - 只在CMakeLists.txt大改时重新配置
3. **并行编译** - 已优化为8个并行任务
4. **自动DLL复制** - CMakeLists.txt已配置，无需手动复制

## 🔧 故障排查

如果构建失败：
1. 检查Visual Studio是否已安装
2. 检查vcpkg依赖是否已安装：`vcpkg list`
3. 清理构建目录：`rmdir /s /q build_ninja2`，然后重新配置

---

**记住：以后构建exe都用 `build_fast.bat`！**

